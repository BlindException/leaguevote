<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous" />
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
    <title>Recover Your Username</title>
    <style></style>
    <link href="https://robertprockjr.com/leaguevote/CSS/SiteStyle.css" rel="stylesheet" />
</head>
<body>
<div class="container mx-auto mt-3 mb-5">
        <div class="row">
            <header class="bg-white p-3 my-5">
                <h1  class="w-25 p-5 mb-4 mt-3 ms-3 text-start rounded-circle">LeagueVote
                </h1>
            </header>
        </div>
    </div>
    
    <div class="container mx-auto my-5">
        <main role="main">
            <div class="row">
                <h2 class="shadow mt-2 mb-4 rounded-pill text-center w-50 p-4 mx-auto border border-3" >Reset Password</h2>
            </div>
        <form  method="post" action="../../Controllers/Index/updatepassword.php" class="needs-validation">
            <input type = 'text' value = 'reset' name = 'Action' hidden/>
<div class="row">
            <div class="col-2">
    <span class="align-middle"><label class="form-check-label">Show Password<input type="checkbox" id="createPasswordCB"class="form-check" /></label></span></div>
        </div>
    <div class="col-10">
        <div class="row"><label for="password" class="form-label">Enter Password:</label></div>
            <div class="row"><input type="password" id="password" name="Password" required onblur="matchPassword()" class="form-control" pattern="(?=^.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,255}$" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" /><div class = "valid-feedback">&check;</div><div class = "invalid-feedback">╘Enter Valid Password! It must be at least 8 characters, contain 1 uppercase letter, 1 lowercase letter and 1 number.</div></div>
        
            <div class="row"><label for="confirm" class="form-label">Confirm Password:</label></div>
            <div class="row"><input type="password" id="confirm" required onblur="matchPassword()"  class="form-control" pattern="(?=^.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,255}$" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" /><div class = "valid-feedback">&check;</div><div class = "invalid-feedback">╘Enter Valid Password! It must be at least 8 characters, contain 1 uppercase letter, 1 lowercase letter and 1 number.</div></div>
                    <div id="passwordMessage" style="display:none;">Your Passwords do not match!</div>
        </div>
    </div>
        
    <div class="row"><div class="g-recaptcha" data-sitekey="6LedXNEdAAAAAKsfvdo5r7A95X6jfwWh-MYfXSIU" data-callback="validateCaptcha"></div>        <input type="text" id="gResponse" name="GResponse" hidden />        </div>
            <div class="row"><button id="submit" type="submit" class="btn btn-success">Submit</button></div> 
                    </form>
            </main>
    </div>
    <div class="container-fluid mt-5 mb-3">
        <footer class="bg-white text-center text-dark p-3 my-5 w-100">
            
            <div class="row">
                <small>&copy;2022 BlindException</small>
            </div>
        </footer>
    </div>        
    <script src="https://code.jquery.com/jquery-
3.4
.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>
</body>
</html>
<script>
    function matchPassword() {
        var password = $('#password').val();
        var confirm = $('#confirm').val();
        if (confirm == '' && password == '') {
            return;
        }
    var submit = $('#submit');
        var message = $('#passwordMessage');
        message.hide();
        if (confirm=== password) {
                                submit.attr('disabled', false);
            message.hide();
        } else
        {
                submit.attr('disabled', true);
            message.show();
            message.focus();
            message.fadeOut(10000);
                                }
    }

    
        var createCB = $('#createPasswordCB');
        var password = $('#password');
    var confirm = $('#confirm');
    
    createCB.on('click', function () {
        if (createCB.is(":checked") == true) {
            password.prop('type', 'text');
            confirm.prop('type', 'text');
            console.log("checked");
        }
        if (createCB.is(":checked") == false) {
                        password.prop('type', 'password');
            confirm.prop('type', 'password');
            console.log("Not checked");
        }
        $(':reset').on('click', function () {
            password.prop('type', 'password');
            confirm.prop('type', 'password');
        });
    })
         var validateCaptcha = function(token) {
                $('#gResponse').val(token);
    }
</script>